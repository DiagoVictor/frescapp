<div class="container-fluid mt-5">
    <div class="row justify-right">

      <div class="col-6">
        <input type="text" class="form-control" placeholder="Buscar producto..." [(ngModel)]="searchText"
          (keyup)="filterProducts()">
      </div>
      <div class="col-auto">
        <label for="fechaInicio">Fecha de inicio:</label>
        <input type="date" id="fechaInicio" class="form-control" [(ngModel)]="searchDate_start">
      </div>
      <div class="col-auto">
        <label for="fechaFin">Fecha de fin:</label>
        <input type="date" id="fechaFin" class="form-control" [(ngModel)]="searchDate_end">
      </div>
      <div class="col-auto">
        <button class="btn btn-primary" (click)="getProducts(searchDate_start,searchDate_end)">
          <i class="fas fa-search"></i> Buscar
        </button>
      </div>
      <div class="col-auto">
        <button class="btn btn-primary" (click)="getProducts(searchDate_start,searchDate_end)">
          <i class="fas fa-search"></i> Cargar SIPSA
        </button>
      </div>
    </div>
    <br *ngIf="successMessage">
    <div *ngIf="successMessage" class="alert alert-success" role="alert">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
      {{ errorMessage }}
    </div>
    <br>
    <table class="table">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Nombre</th>
          <th>sku</th>
          <th>Unidad</th>
          <th>Categoria</th>
          <th>Padre</th>
          <th>Hijo</th>
          <th>Step Unit</th>
          <th>Factor Volumen</th>
          <th>Sipsa ID</th>
          <th>Margen</th>
          <th>Última Compra</th>
          <th>Última Compra Sugerida</th>
          <th>Última Precio Venta</th>
          <th>Sipsa Mínimo</th>
          <th>Sipsa Máximo</th>
          <th>Sipsa Promedio</th>
          <th>Precio Venta</th>
          <th>Precio Compra</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of this.filteredProducts">
          <td>{{ product.operation_date }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.sku }}</td>
          <td>{{ product.unit }}</td>
          <td>{{ product.category }}</td>
          <td>{{ product.root }}</td>
          <td>{{ product.child }}</td>
          <td>{{ product.step_unit }}</td>
          <td>{{ product.factor_volumen }}</td>
          <td>{{ product.sipsa_id }}</td>
          <td>{{ product.margen }}</td>
          <td>{{ product.last_price_purchased | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.last_price_purchase | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.last_price_sale | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.minimoKg | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.maximoKg | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.promedioKg | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.price_sale | currency:'USD':'symbol':'1.0-0' }}</td>
          <td>{{ product.price_purchase | currency:'USD':'symbol':'1.0-0' }}</td>
        </tr>
      </tbody>
    </table>
</div>
    